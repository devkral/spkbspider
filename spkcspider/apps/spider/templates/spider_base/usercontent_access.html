{% extends "spider_base/ucs_base.html" %}
{% load i18n %}

{% block title %}{% if scope == "add" %}{% blocktrans trimmed with name=object %}
  Create Content: {{name}}
{% endblocktrans %}{% elif scope == "update" %}{% blocktrans trimmed with name=object %}
  Update Content: {{name}}
{% endblocktrans %}{% else %}{% blocktrans trimmed with name=object %}
  Content: {{name}}
{% endblocktrans %}{% endif %}{% endblock %}

{% block context_actions %}
{{block.super}}
{% endblock context_actions %}
{% block main_classes %}w3-padding w3-content w3-card-4 w3-pale-green{% endblock %}

{% block content %}
  <div>
    <a class="w3-left" href="{% url 'spider_base:ucontent-list' user=uc.username name=uc.name nonce=uc.nonce %}">{% trans 'index' %}</a>
    {% if scope != "add" %}
      <span class="w3-right">
        <a href="{% url 'spider_base:ucontent-remove' user=uc.username name=uc.name nonce=object.nonce id=object.id %}">
          {% trans 'delete' %}
        </a>?
      </span>
    {% endif %}
    <h1 class="w3-center">
      {% if scope == "add" %}
        {% blocktrans trimmed with name=object %}
          Create Content: <em>{{name}}</em>
        {% endblocktrans %}
      {% elif scope == "update" %}
        {% blocktrans trimmed with name=object %}
          Update Content: <em>{{name}}</em>
        {% endblocktrans %}
      {% else %}
        {% blocktrans trimmed with name=object %}
          Content: <em>{{name}}</em>
        {% endblocktrans %}
      {% endif %}
    </h1>
  </div>
{% if form %}
  {{form.media}}
  {% if scope != "update" %}
  <details>
    <summary class="w3-btn w3-grey">
      <i class="fa fa-plus" style="margin-right:10px" aria-hidden="true"></i>
      {% trans 'Content Settings' %}
      <i class="fa fa-caret-down" style="margin-left:5px" aria-hidden="true"></i>
    </summary>
    {% endif %}
    {{form.media}}
    {% include "spider_base/form_errors.html" with form=form %}
    <form action="{{ request.path }}" method="post">
      {% csrf_token %}
      <fieldset>
        <legend><h2>{% trans 'Content Settings' %}</h2></legend>
        {% include "spider_base/base_form.html" with form=form %}
      </fieldset>
      {% if content and scope == "update" %}
        <fieldset>
          <legend><h2>{% trans 'Other Settings' %}</h2></legend>
          {{content|safe}}
        </fieldset>
      {% endif %}
      <button class="w3-button w3-grey">
        {% trans 'Update' %}
      </button>
    </form>
  {% if scope != "update" %}
  </details>
  {% endif %}
{% endif %}
{% if object.id and UserContentType.raw_update in associated.ctype %}
  <div>
    <a class="w3-button" href="{% url 'ucontent-access' id=object.id nonce=object.nonce access='raw_update' %}">
      <i class="fa fa-settings" aria-hidden="true"></i>
      {% trans 'Update Raw Content' %}
    </a>
  </div>
{% endif %}
{% if scope != "update" %}{{content|safe}}{% endif %}
{% endblock %}
