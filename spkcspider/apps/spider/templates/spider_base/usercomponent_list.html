{% extends "spider_base/ucs_base.html" %}
{% load i18n %}
{% block title %}{% if component_user %}
  {% blocktrans trimmed with name=component_user %}
    Component List of {{name}}
  {% endblocktrans %}
{% else %}{% blocktrans trimmed %}
  Component List
{% endblocktrans %}{% endif %}{% endblock %}

{% block main_classes %}{{block.super}} w3-content w3-card-4{% endblock %}

{% block content %}
  <div>
    {% if request.user.is_authenticated %}
      <a class="w3-right" href="{% url 'spider_base:ucomponent-create' %}">
        <i class="fa fa-plus" style="margin-right:10px" aria-hidden="true"></i>
        {% trans 'Add New Component' %}
      </a>
    {% endif %}
    <h1 class="w3-center">
      {% trans "User Components" %}
    </h1>
  </div>
  <div class="w3-margin">
    <table class="w3-table w3-striped w3-bordered w3-hoverable">
      {% for uc in object_list %}
        <tr>
          <td class="">
            {% if not component_user %}{{uc.user}} - {%endif%}{{ uc }}
          </td>
          <td class="w3-show-inline-block">
            <div class="w3-bar w3-round-large w3-tiny w3-blue">
              <a class="w3-hover-black w3-button w3-bar-item" href="{% url 'spider_base:ucontent-list' name=uc.name %}">
                {% trans "List" %}
              </a>
              {% if uc.user == request.user %}
                <a class="w3-hover-black w3-button w3-bar-item" href="{% url 'spider_base:ucomponent-update' name=uc.name %}">
                  {% trans "Edit" %}
                </a>
              {% endif %}
            </div>
          </td>
        </tr>
      {% empty %}
          <tr><td>{% trans 'No User Components available.' %}</td></tr>
      {% endfor %}
    </table>
  </div>
  <div class="page-manipulation w3-padding" style="margin-top:40px">
    <div class="w3-padding">
      <form class="w3-cell-row w3-black" style="max-width:400px" method="GET" action="">
        <input type="hidden" name="page" value="{% if request.GET.search %}{{ page_obj.number }}{% else %}1{% endif %}"/>
        <div class="w3-cell">
          <input class="w3-input" type="text" name="search" placeholder="{% trans 'Search' %}" />
        </div>
        <div class="w3-cell">
          <button class="w3-button w3-input w3-gray">-&gt;</button>
        </div>
      </form>
    </div>
    <div class="w3-padding w3-center">
      {% if page_obj.has_previous %}
          <a href="?page=1">&laquo; first</a>
          <a href="?page={{ page_obj.previous_page_number }}">previous</a>
      {% endif %}

      <span class="current">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
      </span>

      {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}">next</a>
          <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
    </div>
  </div>
{% endblock %}
