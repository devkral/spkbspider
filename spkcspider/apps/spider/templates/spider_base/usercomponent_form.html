{% extends "spider_base/ucs_base.html" %}
{% load i18n %}

{% block title %}{% if object %}
  {% blocktrans trimmed %}
    Update User Component
  {% endblocktrans %}
{% else %}{% blocktrans trimmed %}
  Create User Component
{% endblocktrans %}{% endif %}{% endblock %}

{% block context_actions %}
{{block.super}}
{% endblock context_actions %}
{% block main_classes %}w3-padding w3-content w3-card-4 w3-pale-green{% if not object %} w3-animate-bottom{% endif %}{% endblock %}


{% block content %}
  <div>
    <a class="w3-left" href="{% url 'spider_base:ucomponent-list' %}">{% trans 'index' %}</a>
    {% if object and object.name != "index" %}
      <span class="w3-right"><a href="{% url 'spider_base:ucomponent-delete' name=object.name %}">{% trans 'delete' %}</a>?</span>
    {% endif %}
    <h1 class="w3-center">
      {% if form.instance.id %}
        {% blocktrans trimmed with name=form.instance.name %}
          Update User Component: <em>{{name}}</em>
        {% endblocktrans %}
      {% else %}
        {% trans 'Create new User Component' %}
      {% endif %}
    </h1>
  </div>
  {{form.media}}
  <form class="" action="{{ request.path }}" method="post">
    {% csrf_token %}
    <fieldset>
      <legend><h1>{% trans 'User Component' %}</h1></legend>
      <ul class="w3-ul">
        {% for field in form %}
        <li>
          <div class="">
            <div class="w3-cell w3-padding">
              {{ field.label_tag }}</br>
              {{ field }}
            </div>
            <div class="w3-cell w3-padding">
            {% if field.help_text %}
              <small class="w3-text-grey">{{ field.help_text|safe }}</small>
            {% endif %}
            </div>
          </div>
          <div class="">
            {% for error in field.errors %}
              <p class="w3-text-red">{{ error|safe }}</p>
            {% endfor %}
          </div>
        </li>
        {% endfor %}
      </ul>
    </fieldset>
    <fieldset>
      <legend><h1>{% trans 'Protections' %}</h1></legend>
      <table class="w3-table">
        <tbody>
        {% for prot in form.protections %}
          {% if forloop.counter0|divisibleby:"2" %}
          <tr>
          {% endif %}
          <td class="w3-half">
            <div class="w3-white w3-card w3-padding">
              <h1 class="w3-center">{{prot.name}}</h1>
              <ul class="w3-ul">
              {% for field in prot %}
              <li class="w3-margin">
                <div class="">
                  {{ field.label_tag }}</br>
                  {{ field }}
                </div>
                <div class="">
                {% if field.help_text %}
                  <small class="w3-text-grey">{{ field.help_text|safe }}</small>
                {% endif %}
                </div>
                <div class="">
                  {% for error in field.errors %}
                    <p class="w3-text-red">{{ error|safe }}</p>
                  {% endfor %}
                </div>
              </li>
              {% endfor %}
            </ul>
            </div>
          </td>
          {% if forloop.counter|divisibleby:"2" or forloop.last %}
          </tr>
          {% endif %}
        {% empty%}
          <tr><td class="w3-padding" colspan="2">
            <div class="w3-orange w3-padding"> No protections: create component first </div>
          </td></tr>
        {% endfor %}
        </tbody>
      </table>
    </fieldset>
    <button class="w3-button w3-grey">
      {% if form.instance.id %}{% trans "Update" %}{% else %}{% trans "Create" %}{% endif %}
    </button>
  </form>
{% endblock %}
