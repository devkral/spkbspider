{% extends "spider_protections/base.html" %}
{% load i18n %}
{% block content %}
<form class="w3-padding" action="{{ request.get_full_path }}" method="post">
  {% csrf_token %}
  <fieldset>
    <legend><h1>{% trans 'Allow' %}:</h1></legend>
    <table class="w3-table-all">
      <tr>
        <td class="">{{referrer}}</td>
      </tr>
      {% if use_for_payments %}
        <tr class="w3-orange">
          <td>
            <data hidden="hidden" property="spkc:payments_allowed" datatype="xsd:boolean">true</data>
            {% trans 'Warning: this referrer wants access to payments' %}
          </td>
        </tr>
      {% endif %}
    </table>
  </fieldset>
  <fieldset style="overflow-y: auto; max-height:600px">
    <legend><h1>{% trans 'Access to' %}:</h1></legend>
    <table class="w3-table-all" rel="accessTo">
      <thead>
        <tr>
          <th class="">{% trans 'Scope' %}</th>
          <th class="">{% trans 'Name' %}</th>
        </tr>
      </thead>
      <tbody>
        {% for intention in intentions %}
          <tr class="w3-orange">
            <td class="">{% trans 'Global' %}</td>
            <td typeof="spkc:Intention">
              <data property="spkc:name" datatype="xsd:string">{{intention}}</data>
            </td>
          </tr>
        {% endfor %}
        {% if scope == "list" %}
          <tr>
            <td class="">{% trans 'Component' %}</td>
            <td typeof="spkc:Property">
              <data hidden="hidden" property="spkc:name" datatype="xsd:string">description</data>{% trans 'Description' %}
            </td>
          </tr>
          {% if uc.public %}
            <tr>
              <td class="">{% trans 'Component' %}</td>
              <td typeof="spkc:Property">
                <data hidden="hidden" property="spkc:name" datatype="xsd:string">name</data>{% trans 'Name' %} (<em>{{uc}}</em>)
              </td>
            </tr>
          {% endif %}
          {% for content in object_list %}
            <tr>
              <td class="">{% trans 'Content' %}</td>
              <td typeof="spkc:Content">
                <data property="spkc:name" datatype="xsd:string">{{content}}</data>
              </td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td class="">{% trans 'Content' %}</td>
            <td typeof="spkc:Content">
              <data property="spkc:name" datatype="xsd:string">{{object}}</data>
            </td>
          </tr>
        {% endif %}
        {% for f in uc.features.all %}
          <tr>
            <td class="">{% trans 'Feature' %}</td>
            <td typeof="spkc:Feature">
              <data property="spkc:name" datatype="xsd:string" content="{{f.name}}">{{f}}</data>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </fieldset>
  <button name="action" value="confirm" class="w3-button w3-grey">
    {% trans 'Confirm Access' %}
  </button>

  <button name="action" value="cancel" class="w3-button w3-grey">
    {% trans 'Cancel' %}
  </button>
</form>
{% endblock %}
