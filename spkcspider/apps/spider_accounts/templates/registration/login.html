{% extends "registration/base.html" %}
{% load i18n static spider_protections %}
{% extract_protections "protections" as protections %}

{% block content %}
  <h2>Login</h2>
  {{form.media}}
  <form action="{{ request.path }}" method="post">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ next }}" />
    <fieldset>
      {% include "spider_base/base_form.html" with form=form %}
    </fieldset>

    <fieldset>
      <legend><h1>{% trans 'Authenticate with' %}</h1></legend>
      <table class="w3-table">
        <tbody>
        {% for prot in request.protections %}
          {% if forloop.counter0|divisibleby:"2" %}
          <tr>
          {% endif %}
          <td class="w3-half">
            <div class="w3-white w3-card w3-padding">
              <h1 class="w3-center">{{prot.1}}</h1>
              {% render_protection prot %}
            </div>
          </td>
          {% if forloop.counter|divisibleby:"2" or forloop.last %}
          </tr>
          {% endif %}
        {% endfor %}
        </tbody>
      </table>
    </fieldset>
    <button class="w3-button w3-grey" type="submit">Login</button><br/>
    {% if OPEN_FOR_REGISTRATION %}
      <a href="{% url 'auth:signup' %}">{% trans 'No account? Signup?' %}</a>
    {% endif %}
  </form>

{% endblock %}
